<html>
<head>
	<meta charset='utf8'>
	<title>SimpleKeyboardMath</title>
	<link rel="stylesheet" href="Recursos/estilo.css">
	<link rel="stylesheet" type="text/css" href="Recursos/mathquill/mathquill.css">
	<link rel="stylesheet" type="text/css" href="Recursos/bootstrap.min.css">
	<script type="text/javascript" src="Recursos/ajax.js"></script>
	<script type="text/javascript" src="Recursos/mathquill/mathquill.js"></script>
	<script src="Recursos/bootstrap.min.js"></script>
</head>
<body>
	
	
	<div style='margin:5%;'>	
	
		<table id='tabla'>
			<tr>
				<td colspan='11' style='text-align:left;'>
					<code id='codigo' style='padding:2%;'></code><br><br>
				</td>
			</tr>
			<tr>
				<td colspan='11' style='text-align:left;' >
					<span id='pantalla' class="editor" style='background:#fff' onkeyup='Check(event)'></span>
				</td>
			</tr>
			<tr>
				
				<td><button class='form-control' onClick='insertar("(")'>(</button></td>
				<td><button class='form-control' onClick='insertar(")")'>)</button></td>
				
				
				
				<td><button class='form-control' onClick='insertar("/")'><img src='Recursos/img/fraccion.png' width='40px'></button></td>
				<td><button class='form-control' onClick='insertar("^2")'><img src='Recursos/img/cuadrado.png' width='40px'></button></td>
				<td><button class='form-control' onClick='insertar("^3")'><img src='Recursos/img/tercera.png' width='40px'></button></td>
								
				
				
				
				
				<td><button class='form-control' onClick='insertar("sen\\left(\\right)")'>sen</button></td>
				<td><button class='form-control' onClick='insertar("\\cos\\left(\\right)")'>cos</button></td>
				<td><button class='form-control' onClick='insertar("\\tan\\left(\\right)")'>tan</button></td>
			</tr>
			<tr>
				
				<td><button class='form-control' onClick='insertar("[")'>[</button></td>
				<td><button class='form-control' onClick='insertar("]")'>]</button></td>
				<td><button class='form-control' onClick='insertar("\\pi")'>&pi;</button></td>
				<td><button class='form-control' onClick='insertar("^")'><img src='Recursos/img/potencia.png' width='40px'></button></td>
								
				
				<td><button class='form-control' onClick='insertar("\\vec")'><img src='Recursos/img/absoluto.png' width='40px'></button></td>
				<td><button class='form-control' onClick='insertar("\\csc\\left(\\right)")'>csc</button></td>
				<td><button class='form-control' onClick='insertar("\\sec\\left(\\right)")'>sec</button></td>
				<td><button class='form-control' onClick='insertar("\\cot\\left(\\right)")'>cot</button></td>
			</tr>
			<tr>
				<td><button class='form-control' onClick='insertar("+")'>+</button></td>
				<td><button class='form-control' onClick='insertar("-")'><img src='Recursos/img/resta.png' width='40px'></button></td>
				
				
				<td><button class='form-control' onClick='insertar("i")'><img src='Recursos/img/imaginario.png' width='40px'></td>
				<td><button class='form-control' onClick='insertar("\\sqrt")'><img src='Recursos/img/raiz2.png' width='40px'></button></td>
				<td><button class='form-control' onClick='insertar("\\nthroot")'><img src='Recursos/img/raiz.png' width='40px'></button></td>
				
				
				
				<td><button class='form-control' onClick='insertar("sen^{-1}\\left(\\right)")'>sen<sup>-1</sup></button></td>
				<td><button class='form-control' onClick='insertar("\\cos^{-1}\\left(\\right)")'>cos<sup>-1</sup></a></td>
				<td><button class='form-control' onClick='insertar("\\tan^{-1}\\left(\\right)")'>tan<sup>-1</sup></a></td>
			</tr>
			<tr>
				
				<td><button class='form-control' onClick='insertar("*")'><img src='Recursos/img/multiplicacion.png' width='40px'></button></td>
				<td><button class='form-control' onClick='insertar("\div")'><img src='Recursos/img/division.png' width='40px'></button></td>

				
				<td><button class='form-control' onClick='insertar("\\theta")'>&theta;</button></td>
				<td><button class='form-control' onClick='insertar("e")'><i>e</i></button></td>
				<td><button class='form-control' onClick='insertar("\\ln\\left(\\right)")'>ln</button></td>
				
				<td><button class='form-control' onClick='insertar("\\csc^{-1}\\left(\\right)")'>csc<sup>-1</sup></a></td>
				<td><button class='form-control' onClick='insertar("\\sec^{-1}\\left(\\right)")'>sec<sup>-1</sup></button></td>
				<td><button class='form-control' onClick='insertar("\\cot^{-1}\\left(\\right)")'>cot<sup>-1</sup></a></td>
			</tr>
			<tr>
				
				<td><button class='form-control' onClick='insertar(".")'><img src='Recursos/img/punto.png' width='40px'></button></td>
				<td><button class='form-control' onClick='insertar("=")'>=</button></td>
				<td><button class='form-control' title='Escalón unitario' onClick='insertar("U\\left(\\right)")'>U</button></td>
				<td>
					<button class='form-control' data-toggle="modal" data-target="#myModal"><img src='Recursos/img/texto.png' width='40px'>
				</td>
				<td colspan='2'>
					<input type='button' class='form-control' onclick='borrar()'value='Borrar'>
				</td>
				<td colspan='2'>
					<input type='button' class='form-control' onclick='copiar("codigo")' value='Copiar'>
				</td>
			
			</tr>
			
		</table>
	</div>
	
	
	
	
	 <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog" style='text-align:center'>
    <div class="modal-dialog modal-sm">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Texto en pantalla</h4>
        </div>
        <div class="modal-body">
          <p><input type='radio' name='texto-size' onclick='textoSize("pequeño")'> Pequeño</p>
          <p><input type='radio' name='texto-size' onclick='textoSize("mediano")'> Mediano</p>
          <p><input type='radio' name='texto-size' onclick='textoSize("grande")'> Grande</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
      
    </div>
  </div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
  <script>
  var mathFieldSpan = document.getElementById('pantalla');
  var latexSpan = document.getElementById('codigo');
   
  var MQ = MathQuill.getInterface(2);
  var mathField = MQ.MathField(mathFieldSpan,
  {
	spaceBehavesLikeTab: true,
	leftRightIntoCmdGoes: 'up',
	restrictMismatchedBrackets: true,
	sumStartsWithNEquals: true,
	supSubsRequireOperand: true,
	//charsThatBreakOutOfSupSub: '+-=<>',
	autoSubscriptNumerals: true,
	autoCommands: 'pi theta sqrt sum',
	autoOperatorNames: 'sin cos',
	
	
	handlers: 
		{
		edit: function() 
		{
			texto = mathField.text();
			
			
			//numeros especiales
			
			
			if(texto.includes("e"))
			{
				texto = texto.replaceAll("e", "%e");
			}
			
			if(texto.includes("i"))
			{
				texto = texto.replaceAll("i", "%i");
			}
			
			if(texto.includes("p%i"))
			{
				texto = texto.replaceAll("p%i", "*%pi");
			}
			
			
			//Cambio de corchetes
			
			if(texto.includes("["))
			{
				texto = texto.replaceAll("[", "(");
			}
			if(texto.includes("]"))
			{
				texto = texto.replaceAll("]", ")");
			}
			
			//Parentesis
			
			if(texto.includes(")("))
			{
				texto = texto.replaceAll(")(", ")*(");
			}
			if(texto.includes("("))
			{
				texto = texto.replaceAll("(", "*(");
			}
			if(texto.includes("**"))
			{
				texto = texto.replaceAll("**", "*");
			}
			
			//parseo de errores
			
			if(texto.includes("^*("))
			{
				texto = texto.replaceAll("^*(", "^(");
			}
			if(texto.includes("sqrt*"))
			{
				texto = texto.replaceAll("sqrt*", "*sqrt");
			}
			if(texto.includes("**"))
			{
				texto = texto.replaceAll("**", "*");
			}
			
			//Funciones trigonometricas
			
			if(texto.includes("s*%e*n*"))
			{
				texto = texto.replaceAll("s*%e*n*", "sin");
			}
			
			if(texto.includes("\c*o*s *"))
			{
				texto = texto.replaceAll("\\c*o*s *", "cos");
			}
			if(texto.includes("t*a*n*"))
			{
				texto = texto.replaceAll("t*a*n*", "tan");
			}
			
			
			if(texto.includes("s*%e*c*"))
			{
				texto = texto.replaceAll("s*%e*c*", "sec");
			}
			if(texto.includes("c*s*c*"))
			{
				texto = texto.replaceAll("c*s*c*", "csc");
			}
			if(texto.includes("c*o*t*"))
			{
				texto = texto.replaceAll("c*o*t*", "cot");
			}
			
			
			
			if(texto.includes("s*%e*n^(-1)*"))
			{
				texto = texto.replaceAll("s*%e*n^(-1)*", "asin");
			}
			if(texto.includes("\c*o*s ^(-1)*"))
			{
				texto = texto.replaceAll("\\c*o*s ^(-1)*", "acos");
			}
			if(texto.includes("t*a*n^(-1)*"))
			{
				texto = texto.replaceAll("t*a*n^(-1)*", "atan");
			}
			
			
			
			if(texto.includes("s*%e*c^(-1)*"))
			{
				texto = texto.replaceAll("s*%e*c^(-1)*", "asec");
			}
			if(texto.includes("c*s*c^(-1)*"))
			{
				texto = texto.replaceAll("c*s*c^(-1)*", "acsc");
			}
			if(texto.includes("c*o*t^(-1)*"))
			{
				texto = texto.replaceAll("c*o*t^(-1)*", "acot");
			}
			
						
			
			//Funcion Logaritmo
			
			if(texto.includes("l*n*"))
			{
				texto = texto.replaceAll("l*n*", "log");
			}
			
			
			//theta
			
			if(texto.includes("th%eta"))
			{
				texto = texto.replaceAll("\\th%eta", "theta");
				texto = texto.replaceAll(" ", "");
			}
			
			
			//subindice
			
			if(texto.includes("_"))
			{
				texto = texto.replaceAll("_", "");
			}
			
			//parseo errores
			
			if(texto.includes("(*%"))
			{
				texto = texto.replaceAll("(*%", "(%");
			}
			if(texto.includes("(*sqrt"))
			{
				texto = texto.replaceAll("(*sqrt", "(sqrt");
			}
			if(texto.includes("abs*"))
			{
				texto = texto.replaceAll("abs*", "abs");
			}
			if(texto.includes("(*("))
			{
				texto = texto.replaceAll("(*(", "((");
			}
			if(texto.includes("((*("))
			{
				texto = texto.replaceAll("((*(", "(((");
			}
			if(texto.includes("/*("))
			{
				texto = texto.replaceAll("/*(", "/(");
			}
			if(texto.includes("+*("))
			{
				texto = texto.replaceAll("+*(", "+(");
			}
			if(texto.includes("-*("))
			{
				texto = texto.replaceAll("-*(", "-(");
			}
			
			
			
			if(texto.includes("/*sqrt"))
			{
				texto = texto.replaceAll("/*sqrt", "/sqrt");
			}
			if(texto.includes("+*sqrt"))
			{
				texto = texto.replaceAll("+*sqrt", "+sqrt");
			}
			if(texto.includes("-*sqrt"))
			{
				texto = texto.replaceAll("-*sqrt", "-sqrt");
			}
			if(texto.includes("U*("))
			{
				texto = texto.replaceAll("U*(", "U(");
			}
			
			//asterisco
			
			if(texto[0]=="*")
			{
				texto = texto.substring(1, texto.length);
			}
			
			
		    latexSpan.textContent = texto.trim(); 
		  
		                             
		  mathField.focus();
		}
	  }
	});
	
	function insertar(valor)
	 {
		
		if(valor.includes("^2") || valor.includes("^3")|| valor.includes("\\left("))
		{
			mathField.write(valor);
			mathField.keystroke('Left');
			
		}
		else
		{
			mathField.cmd(valor);
		}
		
		
		
		mathField.focus();
	}
	
	String.prototype.replaceAll = function(search, replacement) 
	{
    var target = this;
    return target.split(search).join(replacement);
	};
	
	function copiar(id_elemento)
	{
	  var aux = document.createElement("input");
	  aux.setAttribute("value", document.getElementById(id_elemento).innerHTML);
	  document.body.appendChild(aux);
	  aux.select();
	  document.execCommand("copy");
	  document.body.removeChild(aux);
	}
	
	function borrar()
	{
		mathField.select();
		mathField.keystroke('Del');
	}
	
	function textoSize(tamano)
	{
		switch(tamano)
		{
			case "pequeño":
				$('#pantalla').css("font-size", "14px"); 
				$('#codigo').css("font-size", "12px"); 
			break;
			
			case "mediano":
				$('#pantalla').css("font-size", "18px"); 
				$('#codigo').css("font-size", "14px"); 
			break;
			
			case "grande":
				$('#pantalla').css("font-size", "26px"); 
				$('#codigo').css("font-size", "20px"); 
			break;
		}
	}
  
  </script>
</div>



</body>
</html>
